---
title: "Divide costs fairly amongst friends"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Divide costs fairly amongst friends}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r}
library(dividefair)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_money_transfer.Rmd: do not edit by hand -->


# What's this package about? 
Divide the costs of a group undertaking. If you go hiking with your friends the whole group has some costs that need to be divided. If you always share evenly the division can be unfair. What if somebody had to leave early? What if somebody only participated in some activities? What if somebody booked a seat but couldnt show up? What if there is a person who earns less and others would like to chip in? What if there were children who eat less than a full grown adult? This R package tries to balance these problems to have a fair distribution. Friendship is great and all the accounting should be smooth and unproblematic. 

# How to use this package
So you are convinced that this package is something for you? You want to give it a try? Go ahead. Follow the following steps to divide the costs of an activity fair amongst all participants

## Install and load the package
The package uses R. The package can be installed using devtools and the loaded into R

```
devtools::install_github(github.com/jakobschumacher/dividefair)
library(dividefair)
```

## Prepare input files
This is the tricky part of the undertaking. You need to have two files where you collect all the information that you need. Fortunately you can use those files also during the planning of the group activity - so next time you start with a group activity write down the information acording to the following scheme. 

> The `participants.csv` file. This should be a csv file. There should be 4 types of columns in that file: person columns (something like *id*, *name* or *age*), grouping columns (usually called *group*), cost columns (that all start with the prefix *cost_* and the continue with the name of the cost) and lastely and adjustment column (called *adjustment*). You can have a look at the example file [participants.csv](inst/participants.csv)

> The `costs.csv` file. This file contains all the costs. One column must be *id*, one column must be the name of the cost and one column should contain the actual cost. You can have a look at the example file [costs.csv](inst/costs.csv)

## Run the analysis
This is the easy part. If the input files are in structured in the right way, all you need to do is run:

```
divide_fairly(participants_file = "link_to_participants_file.csv", costs_file = "link_to_costs_file.csv")
```

What this will do is: It reads in the files, checks if the files are structured in the right way, changes categorical values into numerical values, it calculates a weight based on the age, adjustment and the grade of involvement. In the end it gives out the amount that everybody needs to pay and whom the money should be paid.


# This is the documentation of all functions of the package


## Function to read costs file
This is a helper function that reads in the data from the participant file.

```{r example-read_costs}
data_costs <- dividefair::read_costs()
```





## Function to read the participants file
This is a helper function that reads in the data from the participant file

```{r examples-read_participants}
data_participants <- read_participants()

```




## Function to check conformity of dataset
This is a helper function that checks if the two data files are in the right format


## Function to change the categorical values to numerical values 
This is a helper function that is used in the read_participants function. In the cost variables we accept categorical values. These categorical values need to be turned into numeric values 

```{r examples-change_categorical_to_numeric}
data_participants <- change_categorical_to_numeric()
```








## Function to collect some basic stats 
This function collects some basic stats about the activity and the participants

```{r examples-get_stats}
stats <- get_stats(read_participants())

```



## Function to calculate the share

```{r example-divide_costs}
data_participants <- divide_costs()
```




## Function to minimize payments between payers and recievers
This is a helper function. We will recieve people who will recieve money and people who will need to pay money. We need to match those by also reducing the number of payments. 

```{r example-minimize_payments}

df <- data.frame(
  person = c("Brown", "Smith", "Fisher", "Taylor", "Davis", "Johnson", "Wilson", "ORally"),
  to_pay = c(-995, -125, -80,  210, 245, 300, 365, 80)
)

minimize_payments(df)

```




## Function to give you amount each has to pay

```{r example-divide_fairly}
result <- divide_fairly(pay_by = "group")
```



